# =============================================================================
# user-service - Development Environment (Local Registry + local.wealist.co.kr)
# =============================================================================
# Overrides for local Kind cluster with localhost:5001 registry

# -----------------------------------------------------------------------------
# Global Overrides
# -----------------------------------------------------------------------------
global:
  namespace: wealist-dev
  environment: develop
  domain: local.wealist.co.kr
  imageRegistry: localhost:5001

# -----------------------------------------------------------------------------
# Image Overrides
# -----------------------------------------------------------------------------
image:
  pullPolicy: Always  # Always pull in development

# -----------------------------------------------------------------------------
# Deployment Overrides
# -----------------------------------------------------------------------------
replicaCount: 1  # Single replica for development

# -----------------------------------------------------------------------------
# Application Configuration Overrides
# -----------------------------------------------------------------------------
config:
  ENV: "dev"
  LOG_LEVEL: "debug"

  # Server base path for ingress routing
  SERVER_BASE_PATH: "/api"

  # S3 public endpoint for local domain
  S3_PUBLIC_ENDPOINT: "https://local.wealist.co.kr/minio"

# -----------------------------------------------------------------------------
# Health Check Overrides (with SERVER_BASE_PATH)
# -----------------------------------------------------------------------------
healthCheck:
  liveness:
    path: /api/health/live
    initialDelaySeconds: 15  # Faster startup in dev
  readiness:
    path: /api/health/ready
    initialDelaySeconds: 5

# -----------------------------------------------------------------------------
# Resource Overrides (Lower limits for development)
# -----------------------------------------------------------------------------
resources:
  requests:
    memory: "128Mi"
    cpu: "50m"
  limits:
    memory: "256Mi"
    cpu: "200m"

# -----------------------------------------------------------------------------
# Autoscaling Disabled (Not needed in development)
# -----------------------------------------------------------------------------
autoscaling:
  enabled: false

# -----------------------------------------------------------------------------
# Security Overrides (Relaxed for development)
# -----------------------------------------------------------------------------
podSecurityContext:
  runAsNonRoot: false  # Allow root in dev for debugging
  # fsGroup: 1000

securityContext:
  allowPrivilegeEscalation: false
  runAsNonRoot: false

# -----------------------------------------------------------------------------
# Service Account (Simple in development)
# -----------------------------------------------------------------------------
serviceAccount:
  create: false  # Use default service account

# -----------------------------------------------------------------------------
# Network Policy Disabled (Not needed in local cluster)
# -----------------------------------------------------------------------------
networkPolicy:
  enabled: false

# -----------------------------------------------------------------------------
# Monitoring Overrides
# -----------------------------------------------------------------------------
metrics:
  enabled: true  # Enable for testing

podAnnotations: {}

# -----------------------------------------------------------------------------
# Pod Disruption Budget Disabled (Not needed in development)
# -----------------------------------------------------------------------------
podDisruptionBudget:
  enabled: false
