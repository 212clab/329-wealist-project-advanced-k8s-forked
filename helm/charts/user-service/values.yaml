# Default values for user-service

global:
  namespace: wealist-dev
  environment: production
  imageRegistry: ""

# Image configuration
image:
  repository: user-service
  tag: latest
  pullPolicy: Always

# Deployment configuration
replicaCount: 1

# Service configuration
service:
  type: ClusterIP
  port: 8081
  targetPort: 8081
  annotations: {}

# Application configuration
config:
  PORT: "8081"
  SERVER_PORT: "8081"
  ENV: "production"
  LOG_LEVEL: "info"

  # Database
  DB_HOST: "postgres"
  DB_PORT: "5432"
  DB_NAME: "wealist_user_db"

  # Redis
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"

  # Service URLs
  AUTH_SERVICE_URL: "http://auth-service:8080"

  # S3/MinIO Configuration
  S3_BUCKET: "wealist-files"
  S3_REGION: "ap-northeast-2"
  S3_ENDPOINT: "http://minio:9000"
  S3_PUBLIC_ENDPOINT: "http://wealist.local/minio"

  # Server base path (for ingress routing)
  SERVER_BASE_PATH: ""

# Health check configuration
healthCheck:
  liveness:
    enabled: true
    path: /api/health
    port: 8081
    initialDelaySeconds: 30
    periodSeconds: 10
  readiness:
    enabled: true
    path: /api/ready
    port: 8081
    initialDelaySeconds: 5
    periodSeconds: 5

# Resource limits
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "500m"

# Environment variable sources
envFrom:
  - configMapRef:
      name: wealist-shared-config
  - configMapRef:
      name: user-service-config
  - secretRef:
      name: wealist-shared-secrets

# Additional environment variables
env:
  - name: DATABASE_URL
    value: "postgresql://user_service:user_service_password@postgres:5432/wealist_user_db?sslmode=disable"

# Pod annotations
podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8081"
  prometheus.io/path: "/metrics"

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
